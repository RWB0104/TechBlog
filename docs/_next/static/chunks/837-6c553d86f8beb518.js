(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[837],{45837:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return MarkdownBox}});var n=r(18891),a=r(5242),o=r(77333),c=r(91043),l=r(13473),s=r(31339),d=r(54783),i=r.n(d),u=r(46271),m=r.n(u);let g=i().bind(m());var molecule_MarkdownCategoryItem=function(e){let{category:t,count:r,selected:d,dimmed:i,...u}=e;return(0,n.jsx)(c.Z,{className:"fullwidth","data-component":"MarkdownCategoryItem","data-selected":d,...u,children:(0,n.jsxs)(o.Z,{className:g("card"),position:"relative",width:"100%",children:[(0,n.jsx)(o.Z,{className:g("wrap"),height:"100%",width:"100%",children:(0,n.jsx)(a.Z,{alt:t,className:g("image",{dimmed:i}),height:"100%",src:"https://datastore.itcode.dev/blog/category/".concat(encodeURIComponent(t),".png"),width:"100%"})}),(0,n.jsxs)(l.Z,{alignItems:"center",bgcolor:"#000000AA",bottom:0,className:g("title"),direction:"row",justifyContent:"space-between",padding:1,position:"absolute",width:"100%",children:[(0,n.jsx)(s.Z,{color:"white",variant:"caption",children:t}),(0,n.jsx)(s.Z,{color:"white",variant:"caption",children:r})]})]})})},h=r(18510),w=r(63666),k=r(78896),p=r(98080),f=r(48888),x=r(94749),y=r(24839),M=r(39129),markdown_MarkdownCategory=function(e){let{markdown:t}=e,r=(0,y.useRouter)(),a=(0,y.useSearchParams)(),o=(0,y.usePathname)(),c=(0,M.useMemo)(()=>a.get("keyword"),[a]),d=(0,M.useMemo)(()=>a.getAll("category"),[a]),i=(0,M.useMemo)(()=>t.filter(e=>{let{frontmatter:t}=e;return!c||!(c.length>0)||t.title.includes(c)||t.excerpt.includes(c)}).reduce((e,t)=>{let{frontmatter:r}=t,n=e.findIndex(e=>{let{name:t}=e;return t===r.category}),a=d.includes(r.category);return n>-1?(e[n].count+=1,e[n].selected=a):e.push({count:1,name:r.category,selected:a}),e},[{count:t.length,name:"전체",selected:!1}]),[t,c,d]),u=(0,M.useCallback)(e=>d.length>0&&!d.includes(e),[d]),m=(0,M.useCallback)(e=>{let t=new URLSearchParams(a),n=t.get("keyword"),c=t.getAll("category"),l=c.includes(e);t.delete("page"),n&&t.set("keyword",n),"전체"===e?t.delete("category"):l?(t.delete("category"),c.filter(t=>t!==e).forEach(r=>{r!==e&&t.append("category",r)})):t.append("category",e),r.push("".concat(o,"?").concat(t.toString()),{scroll:!1})},[c,a]);return(0,n.jsxs)(k.Z,{children:[(0,n.jsx)(f.Z,{expandIcon:(0,n.jsx)(h.Z,{}),children:(0,n.jsxs)(l.Z,{alignItems:"center",direction:"row",spacing:2,children:[(0,n.jsx)(w.Z,{color:"primary"}),(0,n.jsx)(s.Z,{fontWeight:"bold",variant:"h5",children:"카테고리"})]})}),(0,n.jsx)(p.Z,{children:(0,n.jsx)(x.ZP,{spacing:.5,container:!0,children:i.map(e=>{let{name:t,count:r,selected:a}=e;return(0,n.jsx)(x.ZP,{md:2,xs:4,item:!0,children:(0,n.jsx)(molecule_MarkdownCategoryItem,{category:t,count:r,dimmed:u(t),selected:a,onClick:()=>m(t)})},t)})})})]})},molecule_InfiniteScroller=function(e){let{fetchMargin:t,isLast:r,onFetch:a,children:c,...l}=e,s=(0,M.useRef)(null);return(0,M.useEffect)(()=>{let e=new IntersectionObserver(e=>{e.some(e=>(e.isIntersecting&&a&&!r&&a(),e.isIntersecting))},{rootMargin:t,threshold:0});return s.current&&e.observe(s.current),()=>{e.disconnect()}},[s.current,t,r,a]),(0,n.jsxs)(o.Z,{"data-component":"InfiniteScroller",...l,children:[c,(0,n.jsx)(o.Z,{ref:s,width:"100%"})]})},j=r(71),_=r(15049),markdown_MarkdownInfiniteList=function(e){let{markdown:t}=e,r=(0,y.useRouter)(),a=(0,y.useSearchParams)(),c=(0,y.usePathname)(),{referer:l,setReferer:s}=(0,_.Eh)(),d=(0,M.useMemo)(()=>parseInt(a.get("page")||"1",10),[a]),i=(0,M.useMemo)(()=>a.get("keyword"),[a]),u=(0,M.useMemo)(()=>a.getAll("category"),[a]),m=(0,M.useCallback)(()=>{let e=new URLSearchParams(a);e.set("page","".concat(d+1)),e.delete("category"),i&&e.set("keyword",i),u.forEach(t=>{e.append("category",t)}),r.push("".concat(c,"?").concat(e.toString()),{scroll:!1})},[c,r,a]),g=(0,M.useMemo)(()=>t.filter(e=>{let{frontmatter:t}=e;return i&&i.length>0&&u.length>0?(t.title.includes(i)||t.excerpt.includes(i))&&u.includes(t.category):i&&i.length>0?t.title.includes(i)||t.excerpt.includes(i):!(u.length>0)||u.includes(t.category)}),[u,i,t]),h=(0,M.useMemo)(()=>{let e=6*d;return g.slice(0,e)},[d,g]),w=(0,M.useMemo)(()=>{let e=Math.ceil(g.length/6);return d>=e},[d,g]),k=(0,M.useCallback)(()=>{let e=new URLSearchParams(a),t=e.get("page"),r=e.get("keyword"),n=e.getAll("category"),o={scroll:window.scrollY};t&&(o.page=t),r&&r.length>0&&(o.keyword=r),n&&n.length>0&&(o.category=n),s(o)},[a,s]);return(0,M.useEffect)(()=>{(null==l?void 0:l.scroll)&&window.scroll({top:l.scroll}),s(void 0)},[s]),(0,n.jsx)(o.Z,{"data-component":"MarkdownInfiniteList",children:(0,n.jsx)(molecule_InfiniteScroller,{fetchMargin:"500px",isLast:w,onFetch:m,children:(0,n.jsx)(j.Z,{markdown:h,onCardClick:k})})})},Z=r(68563),I=r(2461),C=r(27745),markdown_MarkdownSearch=function(){let e=(0,y.useRouter)(),t=(0,y.useSearchParams)(),r=(0,y.usePathname)(),[a,o]=(0,M.useState)(""),c=(0,M.useRef)(null),l=(0,M.useCallback)(n=>{let{currentTarget:a}=n,o=new URLSearchParams(t);o.delete("page"),a.value.length>0?o.set("keyword",a.value):o.delete("keyword"),e.push("".concat(r,"?").concat(o.toString()),{scroll:!1})},[e,t]);return(0,M.useEffect)(()=>{let e=new URLSearchParams(t),r=e.get("keyword");o(r||"")},[]),(0,n.jsx)(C.Z,{"data-component":"MarkdownSearch",defaultValue:a,label:"키워드",placeholder:"⌨️ 원하는 키워드를 입력해보세요",ref:c,size:"small",variant:"outlined",InputProps:{startAdornment:(0,n.jsx)(I.Z,{position:"start",children:(0,n.jsx)(Z.Z,{})})},onChange:l})};function MarkdownBox(e){let{type:t}=e,r=(0,_.AM)(),a=(0,_.zm)(),o={posts:r.markdown,projects:a.markdown};return(0,n.jsxs)(l.Z,{"data-component":"MarkdownBox",spacing:10,children:[(0,n.jsxs)(l.Z,{spacing:4,children:[(0,n.jsx)(markdown_MarkdownSearch,{}),(0,n.jsx)(markdown_MarkdownCategory,{markdown:o[t]})]}),(0,n.jsx)(markdown_MarkdownInfiniteList,{markdown:o[t]})]})}},15049:function(e,t,r){"use strict";r.d(t,{AM:function(){return a},Eh:function(){return c},zm:function(){return o}});var n=r(31360);let a=(0,n.Ue)(e=>({markdown:[],setMarkdown:t=>{e({markdown:t})}})),o=(0,n.Ue)(e=>({markdown:[],setMarkdown:t=>{e({markdown:t})}})),c=(0,n.Ue)(e=>({setReferer:t=>{e({referer:t})}}))},46271:function(e){e.exports={card:"MarkdownCategoryItem_card__ImsuR",image:"MarkdownCategoryItem_image__BZrYE",wrap:"MarkdownCategoryItem_wrap__E1H3l",dimmed:"MarkdownCategoryItem_dimmed__3RTdj",title:"MarkdownCategoryItem_title__0rdoJ"}}}]);