I"&<h2 id="개요">개요</h2>

<p>게시글을 읽다 보면 내용이 끝나는 하단에 <strong>추천 게시물</strong>, <strong>최근 게시물</strong>과 같이 블로그에 기재된 다른 여러 컨텐츠를 랜덤으로 노출시키기도 한다. 이러한 구조는 <a href="/posts/2020/09/next-prev-post-button/">이전 게시글</a>의 페이지 이동 버튼과 더불어 사용자에게 컨텐츠에 대한 흥미를 유발하고, 한 번의 접속으로 여러 컨텐츠를 노출시키는 효과가 있다. 이 장에서는 블로그의 게시글 중 랜덤으로 몇 가지를 추천 게시글로 보여주는 기능을 구성한다.</p>

<hr />
<h2 id="게시물-리스트-가져오기">게시물 리스트 가져오기</h2>

<p>게시글을 출력하기 위해서 우선 게시글의 목록을 가져올 필요가 있다. 게시글의 목록은 Liquid 언어를 통해 가져올 수 있으며, HTML 코드에서 아래와 같이 입력하면 된다.</p>

<figure class="highlight"><pre><code class="language-markdown" data-lang="markdown">{% assign posts = site[page.collection] %}</code></pre></figure>

<p>위의 코드를 이용하면 전체 게시글 리스트가 담긴 배열을 얻을 수 있다. 이 배열의 각 요소가 하나의 게시글이 된다. for문 같은 반복문을 통해 각각의 게시물 데이터에 접근할 수 있다. <strong>assign</strong> 명령어는 변수를 선언하는 것으로, 위 구문은 posts라는 변수에 게시글 객체를 할당한다는 뜻이다. 해당 선언문 아래로는 <strong>posts</strong>로 <strong>site[page.collection]</strong>를 대체할 수 있다. 이해를 위해 아래의 구문을 입력해보자.</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="c">&lt;!-- 게시글 목록 객체를 posts라는 변수에 할당 --&gt;</span>
{% assign posts = site[page.collection] %}
<span class="c">&lt;!-- posts의 요소인 각 게시물을 post로 지정하는 foreach문 --&gt;</span>
{% for post in posts %}
	<span class="c">&lt;!-- 게시글 제목 --&gt;</span>
	<span class="nt">&lt;p&gt;</span>{{ post.title }}<span class="nt">&lt;/p&gt;</span>
{% endfor %}</code></pre></figure>

<p>위 소스를 HTML에 입력하면, 현재 자신이 작성한 모든 게시글의 제목이 출력될 것이다. 이를 이용하여, 이들 중 일부를 랜덤으로 표시하여 추천 게시물을 표시할 것이다.</p>

<h2 id="랜덤으로-일부-게시글-가져오기">랜덤으로 일부 게시글 가져오기</h2>

<p>추천 게시물을 표시하기 위해선, 게시글 중 일부만을 랜덤으로 가져와야 한다. 코딩은 각자가 구현하기 나름이므로 여러 방식이 존재한다. Liquid에 익숙하거나 경험이 많지 않다면, 랜덤한 숫자를 선정하여 해당하는 인덱스의 게시글을 정할 수도 있지만, Liquid는 필터를 통해 배열과 같은 객체에서 랜덤한 요소들을 가져올 수 있다.</p>

<figure class="highlight"><pre><code class="language-markdown" data-lang="markdown">{% assign posts = site[page.collection] | sample: 7 %}</code></pre></figure>

<p>Liquid의 필터는 <a href="https://jekyllrb-ko.github.io/docs/liquid/filters/">이 곳</a>에서 확인할 수 있다. 필터는 를 입력하여 사용할 수 있으며, <strong>sample</strong>은 배열의 요소 중 정해진 갯수만큼 랜덤으로 지정하는 필터다.</p>

<p>예를 들어, <code class="language-plaintext highlighter-rouge">site[page.collection]</code>가 10개의 페이지 리스트를 포함한다고 가정하면, <code class="language-plaintext highlighter-rouge">assign posts = site[page.collection] | sample: 7</code>는 전체 페이지 배열 중 7개의 랜덤한 페이지만을 포함한 배열을 <strong>posts</strong>에 할당한다는 뜻이다.
{.:notice}</p>
:ET